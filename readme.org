* exposed-ktor

- example of a exposed/ktor capable kotlin app using a buildSrc strategy and exporting an angular frontend

** building
#+BEGIN_SRC shell

# if you don't have a running postgresql container, spin up one:
$ make db

# first, build the backend
$ cd backend && gradle build

$ java -jar build/libs/chess-0.0.1.jar

# now build the frontend
$ cd frontend && yarn && yarn build

#+END_SRC

** running
#+BEGIN_SRC shell
$ java -jar backend/build/libs/chess-0.0.1.jar
$ cd frontend && yarn start
# then open your brower on http://localhost:4200
#+END_SRC
* testing the =/secret= endpoint with postman
  - see [[https://stackoverflow.com/a/24710676/4921402][this]] so question
  - basically you have to issue a GET request containing a header row like this:

#+BEGIN_SRC text
Key: 'Authorization'
Value: Bearer 'yourjwttokenASDFASDFdsfasdfDSAFasdfADfADfASdafAsdFASDF'
#+END_SRC

* testing the =/secret= endpoint with curl
** login
   #+BEGIN_SRC sh
   $ TOKEN=$(curl -s -X POST -d '{"name" : "", "password": "secret"}' -H "Content-Type: application/json"  localhost:8080/login | jq -r '.token')
   #+END_SRC
** GET /secret
   #+BEGIN_SRC sh
   $ curl -H 'Accept: application/json' -H "Authorization: Bearer ${TOKEN}" https://localhost:8080/secret
   #+END_SRC

* LICENSE
- [[https://www.gnu.org/licenses/gpl-3.0.en.html][GNU General Public License v3]]
#+BEGIN_SRC text
GNU General Public License v3
Copyright (c) 2019 Filipe Silva (ninrod)
#+END_SRC


